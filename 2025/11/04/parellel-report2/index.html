<!DOCTYPE html>
<html lang="zh-Hans">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="x5-fullscreen" content="true">
<meta name="full-screen" content="yes">
<meta name="theme-color" content="#317EFB" />
<meta content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=0" name="viewport">
<meta name="description" content="ğŸ“ å¹¶è¡Œç¨‹åºè®¾è®¡å®éªŒæŠ¥å‘Šâ€”â€” CUDA å¹¶è¡Œæ€§èƒ½æµ‹è¯•ä¸åˆ†æ ğŸ§¾ åŸºæœ¬ä¿¡æ¯   é¡¹ç›® å†…å®¹    å®éªŒè¯¾ç¨‹ COMP 4007: Parallel Processing and Computer Architecture   å®éªŒåç§° Programming Assignment 1   å­¦ç”Ÿå§“å è°­å¿—å¼º   å­¦å· 25B951103   å­¦é™¢ è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢   ä¸“ä¸š ç”µå­ä¿¡æ¯   å®éªŒ">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/2025/11/04/parellel-report2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="ğŸ“ å¹¶è¡Œç¨‹åºè®¾è®¡å®éªŒæŠ¥å‘Šâ€”â€” CUDA å¹¶è¡Œæ€§èƒ½æµ‹è¯•ä¸åˆ†æ ğŸ§¾ åŸºæœ¬ä¿¡æ¯   é¡¹ç›® å†…å®¹    å®éªŒè¯¾ç¨‹ COMP 4007: Parallel Processing and Computer Architecture   å®éªŒåç§° Programming Assignment 1   å­¦ç”Ÿå§“å è°­å¿—å¼º   å­¦å· 25B951103   å­¦é™¢ è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢   ä¸“ä¸š ç”µå­ä¿¡æ¯   å®éªŒ">
<meta property="og:locale">
<meta property="og:image" content="http://example.com/img/404.jpg">
<meta property="og:image" content="http://example.com/img/404.jpg">
<meta property="og:image" content="http://example.com/img/404.jpg">
<meta property="article:published_time" content="2025-11-04T13:16:48.511Z">
<meta property="article:modified_time" content="2025-11-06T08:24:15.552Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/404.jpg">


<title >Hexo</title>

<!-- Favicon -->

    <link href='/img/favicon.svg?v=2.2.6' rel='icon' type='image/png' sizes='16x16' ></link>


    <link href='/img/favicon.svg?v=2.2.6' rel='icon' type='image/png' sizes='32x32' ></link>




<!-- Plugin -->




    
<link rel="stylesheet" href="/css/plugins/bootstrap.row.css">

    
<link rel="stylesheet" href="https://unpkg.com/@fancyapps/ui@4.0/dist/fancybox.css">

    
    




<!-- Icon -->

    
<link rel="stylesheet" href="/css/plugins/font-awesome.min.css">




<!-- Variable -->
<script>window.ASYNC_CONFIG = {"hostname":"example.com","author":"John Doe","root":"/","typed_text":null,"theme_version":"2.2.6","theme":{"switch":true,"default":"style-light"},"favicon":{"logo":"/img/favicon.svg","icon16":"/img/favicon.svg","icon32":"/img/favicon.svg","apple_touch_icon":null,"webmanifest":null,"visibilitychange":false,"hidden":"/failure.ico","show_text":"(/â‰§â–½â‰¦/)å’¦ï¼åˆå¥½äº†ï¼","hide_text":"(â—â€”â—)å–”å“Ÿï¼Œå´©æºƒå•¦ï¼"},"i18n":{"placeholder":"æœç´¢æ–‡ç« ...","empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹: ${query}","hits":"æ‰¾åˆ° ${hits} æ¡ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","author":"æœ¬æ–‡ä½œè€…ï¼š","copyright_link":"æœ¬æ–‡é“¾æ¥ï¼š","copyright_license_title":"ç‰ˆæƒå£°æ˜ï¼š","copyright_license_content":"æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é»˜è®¤é‡‡ç”¨ undefined è®¸å¯åè®®ã€‚","copy_success":"å¤åˆ¶æˆåŠŸ","copy_failure":"å¤åˆ¶å¤±è´¥","open_read_mode":"è¿›å…¥é˜…è¯»æ¨¡å¼","exit_read_mode":"é€€å‡ºé˜…è¯»æ¨¡å¼","notice_outdate_message":"è·ç¦»ä¸Šæ¬¡æ›´æ–°å·²ç» undefined å¤©äº†, æ–‡ç« å†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚","sticky":"ç½®é¡¶","just":"åˆšåˆš","min":"åˆ†é’Ÿå‰","hour":"å°æ—¶å‰","day":"å¤©å‰","month":"ä¸ªæœˆå‰"},"swup":false,"plugin":{"flickr_justified_gallery":"https://unpkg.com/flickr-justified-gallery@latest/dist/fjGallery.min.js"},"icons":{"sun":"far fa-sun","moon":"far fa-moon","play":"fas fa-play","email":"far fa-envelope","next":"fas fa-arrow-right","calendar":"far fa-calendar-alt","clock":"far fa-clock","user":"far fa-user","back_top":"fas fa-arrow-up","close":"fas fa-times","search":"fas fa-search","reward":"fas fa-hand-holding-usd","toc_tag":"fas fa-th-list","read":"fas fa-book-reader","arrows":"fas fa-arrows-alt-h","double_arrows":"fas fa-angle-double-down","copy":"fas fa-copy"},"icontype":"font","highlight":{"plugin":"highlighjs","theme":true,"copy":true,"lang":true,"title":"default","height_limit":false},"toc":{"post_title":true},"live_time":{"start_time":"","prefix":"åšå®¢å·²èŒèŒå“’è¿è¡Œ undefined å¤©"},"danmu":{"enable":false,"el":".trm-banner"}};</script>
<script id="async-page-config">window.PAGE_CONFIG = {"isPost":true,"isHome":false,"postUpdate":"2025-11-06 16:24:15"};</script>

<!-- Theme mode css -->
<link data-swup-theme rel="stylesheet" href="/css/index.css?v=2.2.6" id="trm-switch-style">
<script>
    let defaultMode = ASYNC_CONFIG.theme.default !=='auto' ?  ASYNC_CONFIG.theme.default : (window.matchMedia("(prefers-color-scheme: light)").matches ? 'style-light' : 'style-dark')
    let catchMode = localStorage.getItem('theme-mode') || defaultMode;
    let type = catchMode === 'style-dark' ? 'add' : 'remove';
    document.documentElement.classList[type]('dark')
</script>

<!-- CDN -->


    
    



<!-- Site Analytics -->

 
<meta name="generator" content="Hexo 7.3.0"></head>

<body>

  <!-- app wrapper -->
  <div class="trm-app-frame">

    <!-- page preloader -->
    <div class="trm-preloader">
    <div class="trm-holder">
        <div class="preloader">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
</div>
    <!-- page preloader end -->

    <!-- change mode preloader -->
    <div class="trm-mode-swich-animation-frame">
    <div class="trm-mode-swich-animation">
        <i class="i-sun"><i class="iconfont far fa-sun"></i></i>
        <div class="trm-horizon"></div>
        <i class="i-moon"><i class="iconfont far fa-moon"></i></i>
    </div>
</div>
    <!-- change mode preloader end -->

      <!-- scroll container -->
      <div id="trm-dynamic-content" class="trm-swup-animation">
        <div id="trm-scroll-container" class="trm-scroll-container" style="opacity: 0">
            <!-- top bar -->
            <header class="trm-top-bar">
	<div class="container">
		<div class="trm-left-side">
			<!-- logo -->
<a href="/" class="trm-logo-frame trm-anima-link">
    
        <img alt="logo" src="/img/favicon.svg">
    
    
        <div class="trm-logo-text">
            Async<span>zhiqiang</span>
        </div>
    
</a>
<!-- logo end -->
		</div>
		<div class="trm-right-side">
			<!-- menu -->
<div class="trm-menu">
    <nav>
        <ul>
            
            <li class="menu-item-has-children ">
                <a  href="/" target="">
                    é¦–é¡µ
                </a>
                
            </li>
            
            <li class="menu-item-has-children ">
                <a  href="/archives/" target="">
                    æ—¶é—´çº¿
                </a>
                
            </li>
            
            <li class="menu-item-has-children ">
                <a  href="/tags/" target="">
                    æ ‡ç­¾
                </a>
                
            </li>
            
            <li class="menu-item-has-children ">
                <a  href="/categories" target="">
                    åˆ†ç±»
                </a>
                
            </li>
            
        </ul>
    </nav>
</div>
<!-- menu end -->
			
    <!-- mode switcher place -->
    <div class="trm-mode-switcher-place">
        <div class="trm-mode-switcher">
            <i class="iconfont far fa-sun"></i>
            <input class="tgl tgl-light" id="trm-swich" type="checkbox">
            <label class="trm-swich" for="trm-swich"></label>
            <i class="iconfont far fa-moon"></i>
        </div>
    </div>
    <!-- mode switcher place end -->

			
		</div>
		<div class="trm-menu-btn">
			<span></span>
		</div>
	</div>
</header>
            <!-- top bar end -->

            <!-- body -->
            
<div class="trm-content-start">
    <!-- banner -->
    <div class="trm-banner">
    
    <!-- banner cover -->
    <img style="object-position:top;object-fit:cover;" alt="banner" class="trm-banner-cover" src="/img/banner.png">
    <!-- banner cover end -->
    

    <!-- banner content -->
    <div class="trm-banner-content trm-overlay">
        <div class="container">
            <div class="row">
                
                <div class="col-lg-4"></div>
                
                <div class="col-lg-8">

                    <!-- banner title -->
                    <div class="trm-banner-text ">
                        <div class="trm-label trm-mb-20">
                            NEWS LETTER
                        </div>
                        <h1 class="trm-mb-30 trm-hsmb-font">
                            
                        </h1>

                        
                            <ul class="trm-breadcrumbs trm-label">
                                <li>
                                    <a href="/" class="trm-anima-link">Home</a>
                                </li>
                                <li>
                                    <span>
                                        2025
                                    </span>
                                </li>
                            </ul>
                        
                    </div>
                    <!-- banner title end -->

                    <!-- scroll hint -->
                    <span id="scroll-triger" class="trm-scroll-hint-frame">
                        <div class="trm-scroll-hint"></div>
                        <span class="trm-label">Scroll down</span>
                    </span>
                    <!-- scroll hint end -->

                </div>
            </div>
        </div>
    </div>
    <!-- banner content end -->
</div>
    <!-- banner end -->
    <div class="container">
        <div class="row">
            
                <div class="trm-page-sidebar col-lg-4 hidden-sm">
                    <!-- main card -->
                    <div class="trm-main-card-frame trm-sidebar">
    <div class="trm-main-card"> 
        <!-- card header -->
<div class="trm-mc-header">
    <div class="trm-avatar-frame trm-mb-20">
        <img alt="Avatar" class="trm-avatar" src="/img/avatar.jpg">
    </div>
    <h5 class="trm-name trm-mb-15">
        çœ‹é›ª
    </h5>
    
</div>
<!-- card header end -->
        <!-- sidebar social -->

<div class="trm-divider trm-mb-40 trm-mt-40"></div>
<div class="trm-social">
    
        <a href="https://github.com" title="Github" rel="nofollow" target="_blank">
            <i class="iconfont fab fa-github"></i>
        </a>
    
</div>

<!-- sidebar social end -->
        <!-- info -->
<div class="trm-divider trm-mb-40 trm-mt-40"></div>
<ul class="trm-table trm-mb-20">
    
        <li>
            <div class="trm-label">
                Residence:
            </div>
            <div class="trm-label trm-label-light">
                Mars
            </div>
        </li>
    
</ul>
<!-- info end -->

        
    </div>
</div>
                    <!-- main card end -->
                </div>
            
            <div class="trm-page-content col-lg-8">
                <div id="trm-content" class="trm-content">
                    <div class="trm-post-info row hidden-sm">
    <div class="col-sm-4">
        <div class="trm-card trm-label trm-label-light text-center">
            <i class="iconfont far fa-calendar-alt trm-icon"></i><br>
            11/04
        </div>
    </div>
    <div class="col-sm-4">
        <div class="trm-card trm-label trm-label-light text-center">
            <i class="iconfont far fa-clock trm-icon"></i><br>
            21:16
        </div>
    </div>
    <div class="col-sm-4">
        <div id="post-author" class="trm-card trm-label trm-label-light text-center">
            <i class="iconfont far fa-user trm-icon"></i><br>
            John Doe
        </div>
    </div>
</div>
<div class="trm-card ">
    <article id="article-container" class="trm-publication">
    <h1 id="ğŸ“-å¹¶è¡Œç¨‹åºè®¾è®¡å®éªŒæŠ¥å‘Š"><a href="#ğŸ“-å¹¶è¡Œç¨‹åºè®¾è®¡å®éªŒæŠ¥å‘Š" class="headerlink" title="ğŸ“ å¹¶è¡Œç¨‹åºè®¾è®¡å®éªŒæŠ¥å‘Š"></a>ğŸ“ å¹¶è¡Œç¨‹åºè®¾è®¡å®éªŒæŠ¥å‘Š</h1><h2 id="â€”â€”-CUDA-å¹¶è¡Œæ€§èƒ½æµ‹è¯•ä¸åˆ†æ"><a href="#â€”â€”-CUDA-å¹¶è¡Œæ€§èƒ½æµ‹è¯•ä¸åˆ†æ" class="headerlink" title="â€”â€” CUDA å¹¶è¡Œæ€§èƒ½æµ‹è¯•ä¸åˆ†æ"></a>â€”â€” CUDA å¹¶è¡Œæ€§èƒ½æµ‹è¯•ä¸åˆ†æ</h2><hr>
<h3 id="ğŸ§¾-åŸºæœ¬ä¿¡æ¯"><a href="#ğŸ§¾-åŸºæœ¬ä¿¡æ¯" class="headerlink" title="ğŸ§¾ åŸºæœ¬ä¿¡æ¯"></a>ğŸ§¾ åŸºæœ¬ä¿¡æ¯</h3><table>
<thead>
<tr>
<th>é¡¹ç›®</th>
<th>å†…å®¹</th>
</tr>
</thead>
<tbody><tr>
<td>å®éªŒè¯¾ç¨‹</td>
<td>COMP 4007: Parallel Processing and Computer Architecture</td>
</tr>
<tr>
<td>å®éªŒåç§°</td>
<td>Programming Assignment 1</td>
</tr>
<tr>
<td>å­¦ç”Ÿå§“å</td>
<td>è°­å¿—å¼º</td>
</tr>
<tr>
<td>å­¦å·</td>
<td>25B951103</td>
</tr>
<tr>
<td>å­¦é™¢</td>
<td>è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢</td>
</tr>
<tr>
<td>ä¸“ä¸š</td>
<td>ç”µå­ä¿¡æ¯</td>
</tr>
<tr>
<td>å®éªŒæ—¥æœŸ</td>
<td>2025 å¹´ 11 æœˆ 4 æ—¥</td>
</tr>
</tbody></table>
<hr>
<h2 id="ä¸€ã€å®éªŒç›®çš„"><a href="#ä¸€ã€å®éªŒç›®çš„" class="headerlink" title="ä¸€ã€å®éªŒç›®çš„"></a>ä¸€ã€å®éªŒç›®çš„</h2><ul>
<li>æŒæ¡ <strong>CUDA å¹¶è¡Œç¼–ç¨‹æ¨¡å‹</strong> çš„åŸºæœ¬ç”¨æ³•ï¼›</li>
<li>ç†è§£ <strong>çº¿ç¨‹å±‚æ¬¡ç»“æ„ï¼ˆGridã€Blockã€Threadï¼‰</strong>ã€<strong>å…±äº«å†…å­˜ï¼ˆShared Memoryï¼‰</strong> ä¸ <strong>åŒæ­¥æœºåˆ¶ï¼ˆSynchronizationï¼‰</strong>ï¼›</li>
<li>æ¢ç´¢ <strong>å†…å­˜è®¿é—®ä¼˜åŒ–ï¼ˆCoalescing &#x2F; Shared Memory Tilingï¼‰</strong> å¯¹æ€§èƒ½çš„å½±å“ï¼›</li>
<li>å¯¹æ¯” <strong>CPU ä¸²è¡Œç®—æ³•</strong> ä¸ <strong>GPU å¹¶è¡Œç®—æ³•</strong> çš„è¿è¡Œæ—¶é—´ã€åŠ é€Ÿæ¯”ä¸æ•ˆç‡ï¼›</li>
<li>åˆ†æ GPU çš„ <strong>è®¡ç®—èƒ½åŠ›ã€æ˜¾å­˜å¸¦å®½ã€å…±äº«å†…å­˜ç“¶é¢ˆ</strong> ç­‰å› ç´ å¯¹æ€§èƒ½çš„å½±å“ã€‚</li>
</ul>
<hr>
<h2 id="äºŒã€å®éªŒè®¾å¤‡ä¸ç¯å¢ƒ"><a href="#äºŒã€å®éªŒè®¾å¤‡ä¸ç¯å¢ƒ" class="headerlink" title="äºŒã€å®éªŒè®¾å¤‡ä¸ç¯å¢ƒ"></a>äºŒã€å®éªŒè®¾å¤‡ä¸ç¯å¢ƒ</h2><table>
<thead>
<tr>
<th>é¡¹ç›®</th>
<th>å‚æ•°</th>
</tr>
</thead>
<tbody><tr>
<td>æ“ä½œç³»ç»Ÿ</td>
<td>Ubuntu 22.04 LTS</td>
</tr>
<tr>
<td>ç¼–è¯‘å™¨</td>
<td>NVCC (CUDA 12.6) + GCC 11.4.0</td>
</tr>
<tr>
<td>Python ç¯å¢ƒ</td>
<td>3.10ï¼ˆç”¨äºç»˜å›¾åˆ†æï¼‰</td>
</tr>
<tr>
<td>GPU å‹å·</td>
<td>NVIDIA A6000</td>
</tr>
<tr>
<td><strong>Compute Capability</strong></td>
<td><strong>8.6</strong></td>
</tr>
<tr>
<td><strong>Multiprocessor count (SMs)</strong></td>
<td><strong>84</strong></td>
</tr>
<tr>
<td><strong>Max threads per multiprocessor</strong></td>
<td><strong>1536</strong></td>
</tr>
<tr>
<td><strong>Warp size</strong></td>
<td><strong>32</strong></td>
</tr>
<tr>
<td><strong>Max threads per block</strong></td>
<td><strong>1024</strong></td>
</tr>
</tbody></table>
<hr>
<h3 id="å®éªŒæ–¹æ³•è¯´æ˜"><a href="#å®éªŒæ–¹æ³•è¯´æ˜" class="headerlink" title="å®éªŒæ–¹æ³•è¯´æ˜"></a>å®éªŒæ–¹æ³•è¯´æ˜</h3><ul>
<li>æ‰€æœ‰å®éªŒåœ¨ <strong>å• GPU</strong> ç¯å¢ƒä¸‹å®Œæˆï¼›</li>
<li>æ—¶é—´ç»Ÿè®¡é‡‡ç”¨ï¼š<strong>é¢„çƒ­ï¼ˆwarm-upï¼‰2è½®</strong> + <strong>æ­£å¼æµ‹é‡10è½®</strong>ï¼›</li>
<li>æœ€ç»ˆç»“æœå– <strong>å¹³å‡å€¼ Â± æ ‡å‡†å·®</strong>ï¼›</li>
<li><strong>åŠ é€Ÿæ¯”</strong> &#x3D; CPUè¿è¡Œæ—¶é—´ &#x2F; GPUè¿è¡Œæ—¶é—´ï¼›</li>
<li>æ—¶é—´å•ä½ä¸ºæ¯«ç§’ï¼ˆmsï¼‰ã€‚</li>
</ul>
<h2 id="ä¸‰ã€çŸ©é˜µâ€“å‘é‡ä¹˜æ³•å®éªŒ"><a href="#ä¸‰ã€çŸ©é˜µâ€“å‘é‡ä¹˜æ³•å®éªŒ" class="headerlink" title="ä¸‰ã€çŸ©é˜µâ€“å‘é‡ä¹˜æ³•å®éªŒ"></a>ä¸‰ã€çŸ©é˜µâ€“å‘é‡ä¹˜æ³•å®éªŒ</h2><h3 id="3-1-å®éªŒèƒŒæ™¯"><a href="#3-1-å®éªŒèƒŒæ™¯" class="headerlink" title="3.1 å®éªŒèƒŒæ™¯"></a>3.1 å®éªŒèƒŒæ™¯</h3><p>çŸ©é˜µâ€“å‘é‡ä¹˜æ³•ï¼ˆMatrixâ€“Vector Multiplication, MVMï¼‰æ˜¯çº¿æ€§ä»£æ•°ä¸ç§‘å­¦è®¡ç®—ä¸­æœ€åŸºæœ¬çš„è¿ç®—ä¹‹ä¸€ï¼Œ<br> å…¶è®¡ç®—å¤æ‚åº¦ä¸º $O(M \times N)$ï¼Œè®¡ç®—è¿‡ç¨‹ä¸­æ•°æ®ä¾èµ–æ€§å¼ºã€è®¿å­˜é‡å¤§ï¼Œ<br> å±äºå…¸å‹çš„ <strong>è®¡ç®—å¯†é›†å‹</strong> ä¸ <strong>å†…å­˜å¸¦å®½å—é™å‹ä»»åŠ¡</strong>ã€‚</p>
<p>åœ¨ CPU ä¸Šæ‰§è¡Œæ—¶ï¼Œè¿ç®—é€šå¸¸ç”±å•çº¿ç¨‹ä¸²è¡Œå®Œæˆï¼›<br> é€šè¿‡ <strong>CUDA å¹¶è¡ŒåŒ–</strong>ï¼Œå¯ä»¥å°†æ¯ä¸€è¡Œæˆ–æ¯ä¸ªçº¿ç¨‹å—çš„è®¡ç®—ä»»åŠ¡åˆ†é…ç»™ä¸åŒçš„ GPU çº¿ç¨‹ï¼Œä»è€Œæ˜¾è‘—æé«˜å¹¶è¡Œååç‡ã€‚</p>
<hr>
<h3 id="3-2-ç®—æ³•è®¾è®¡ä¸å®ç°"><a href="#3-2-ç®—æ³•è®¾è®¡ä¸å®ç°" class="headerlink" title="3.2 ç®—æ³•è®¾è®¡ä¸å®ç°"></a>3.2 ç®—æ³•è®¾è®¡ä¸å®ç°</h3><h4 id="ä¸²è¡Œç®—æ³•"><a href="#ä¸²è¡Œç®—æ³•" class="headerlink" title="ä¸²è¡Œç®—æ³•"></a>ä¸²è¡Œç®—æ³•</h4><p>çŸ©é˜µâ€“å‘é‡ä¹˜æ³•çš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š<br>$$<br>y_i &#x3D; \sum_{j&#x3D;0}^{N-1} A_{ij} \cdot x_j, \quad i&#x3D;0,1,\dots,M-1<br>$$<br>å¯¹åº”çš„ C è¯­è¨€å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">void MatVecCPU(const float *A, const float *x, float *y, int rows, int cols)</span><br><span class="line">&#123;</span><br><span class="line">    for (int i = 0; i &lt; rows; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        float sum = 0.0f;</span><br><span class="line">        for (int j = 0; j &lt; cols; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            sum += A[i * cols + j] * x[j];</span><br><span class="line">        &#125;</span><br><span class="line">        y[i] = sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>å¤–å±‚å¾ªç¯éå†çŸ©é˜µçš„æ¯ä¸€è¡Œï¼›</li>
<li>å†…å±‚å¾ªç¯å¯¹æ¯è¡Œä¸å‘é‡ <code>x</code> åšç‚¹ç§¯ï¼›</li>
<li>è®¡ç®—ç»“æœå­˜å…¥è¾“å‡ºå‘é‡ <code>y</code>ã€‚</li>
</ul>
<h4 id="å¹¶è¡Œç®—æ³•ï¼ˆCUDAï¼‰"><a href="#å¹¶è¡Œç®—æ³•ï¼ˆCUDAï¼‰" class="headerlink" title="å¹¶è¡Œç®—æ³•ï¼ˆCUDAï¼‰"></a>å¹¶è¡Œç®—æ³•ï¼ˆCUDAï¼‰</h4><p>åœ¨ GPU ä¸Šï¼Œæ¯ä¸ªçº¿ç¨‹è´Ÿè´£è®¡ç®—çŸ©é˜µçš„ä¸€è¡Œï¼ˆæˆ–è‹¥å¹²è¡Œï¼‰ï¼Œ<br> é€šè¿‡å…±äº«å†…å­˜åŠ è½½å‘é‡ <code>x</code>ï¼Œå®ç°æ•°æ®é‡ç”¨ä¸è®¿å­˜ä¼˜åŒ–ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#define TILE_WIDTH 16</span><br><span class="line">__global__ void MatVecSharedKernel(const float *A, const float *x, float *y, int rows, int cols)</span><br><span class="line">&#123;</span><br><span class="line">    __shared__ float x_tile[TILE_WIDTH];  // å…±äº«å†…å­˜ç¼“å†²å‘é‡</span><br><span class="line"></span><br><span class="line">    int row = blockIdx.x * blockDim.x + threadIdx.x;</span><br><span class="line">    float sum = 0.0f;</span><br><span class="line"></span><br><span class="line">    // æ¯æ¬¡å¤„ç† TILE_WIDTH ä¸ªå…ƒç´ </span><br><span class="line">    for (int tileStart = 0; tileStart &lt; cols; tileStart += TILE_WIDTH)</span><br><span class="line">    &#123;</span><br><span class="line">        int idx = tileStart + threadIdx.x;</span><br><span class="line">        if (idx &lt; cols)</span><br><span class="line">            x_tile[threadIdx.x] = x[idx];</span><br><span class="line">        else</span><br><span class="line">            x_tile[threadIdx.x] = 0.0f;</span><br><span class="line"></span><br><span class="line">        __syncthreads(); // ç­‰å¾…å…±äº«å†…å­˜åŠ è½½å®Œæˆ</span><br><span class="line"></span><br><span class="line">        if (row &lt; rows)</span><br><span class="line">        &#123;</span><br><span class="line">            for (int j = 0; j &lt; TILE_WIDTH &amp;&amp; (tileStart + j) &lt; cols; ++j)</span><br><span class="line">            &#123;</span><br><span class="line">                sum += A[row * cols + tileStart + j] * x_tile[j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        __syncthreads();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (row &lt; rows)</span><br><span class="line">        y[row] = sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä¼˜åŒ–è¦ç‚¹ï¼š</strong></p>
<ul>
<li>é‡‡ç”¨ <strong>å…±äº«å†…å­˜ (Shared Memory)</strong> ç¼“å­˜å‘é‡ <code>x</code>ï¼Œå‡å°‘å…¨å±€å†…å­˜è®¿é—®ï¼›</li>
<li>æ¯ä¸ªçº¿ç¨‹è®¡ç®—çŸ©é˜µçš„ä¸€è¡Œï¼Œä»¥æå‡å¹¶è¡Œåº¦ï¼›</li>
<li>ä½¿ç”¨ <code>__syncthreads()</code> ç¡®ä¿å—å†…çº¿ç¨‹åŒæ­¥ï¼›</li>
<li><code>tile</code> æŠ€æœ¯å®ç°æ•°æ®åˆ†å—åŠ è½½ï¼Œæé«˜è®¿å­˜æ•ˆç‡ï¼Œæœ¬TILE_WIDTH&#x3D;16ï¼›</li>
<li>å—å¤§å° (<code>blockDim.x</code>) é€šå¸¸è®¾ä¸º 128~512ï¼Œæ ¹æ® GPU æ¶æ„è°ƒæ•´ã€‚</li>
</ul>
<hr>
<h3 id="3-3-å®éªŒç»“æœä¸åˆ†æ"><a href="#3-3-å®éªŒç»“æœä¸åˆ†æ" class="headerlink" title="3.3 å®éªŒç»“æœä¸åˆ†æ"></a>3.3 å®éªŒç»“æœä¸åˆ†æ</h3><h4 id="ï¼ˆ1ï¼‰è§„æ¨¡-vs-åŠ é€Ÿæ¯”"><a href="#ï¼ˆ1ï¼‰è§„æ¨¡-vs-åŠ é€Ÿæ¯”" class="headerlink" title="ï¼ˆ1ï¼‰è§„æ¨¡ vs åŠ é€Ÿæ¯”"></a>ï¼ˆ1ï¼‰è§„æ¨¡ vs åŠ é€Ÿæ¯”</h4><p><img src="/2025/11/04/parellel-report2/Users\25490\Downloads\speedup_dual_axis_int.png" alt="speedup_dual_axis_int"  data-tag='post-image' onload='this.onload=null;this.style.opacity=1;' loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<h4 id="ï¼ˆ4ï¼‰å®éªŒç»“æœè¡¨æ ¼"><a href="#ï¼ˆ4ï¼‰å®éªŒç»“æœè¡¨æ ¼" class="headerlink" title="ï¼ˆ4ï¼‰å®éªŒç»“æœè¡¨æ ¼"></a>ï¼ˆ4ï¼‰å®éªŒç»“æœè¡¨æ ¼</h4><table>
<thead>
<tr>
<th>Cols</th>
<th>Rows</th>
<th>CPU(ms)</th>
<th>GPU(ms)</th>
<th>Speedup</th>
</tr>
</thead>
<tbody><tr>
<td>256</td>
<td>256</td>
<td>0.218</td>
<td>0.014</td>
<td>15.57Ã—</td>
</tr>
<tr>
<td>512</td>
<td>512</td>
<td>0.872</td>
<td>0.024</td>
<td>36.33Ã—</td>
</tr>
<tr>
<td>1024</td>
<td>1024</td>
<td>3.478</td>
<td>0.043</td>
<td>80.88Ã—</td>
</tr>
<tr>
<td>2048</td>
<td>2048</td>
<td>13.828</td>
<td>0.124</td>
<td>111.50Ã—</td>
</tr>
</tbody></table>
<hr>
<h3 id="3-4-ç»“æœåˆ†æ"><a href="#3-4-ç»“æœåˆ†æ" class="headerlink" title="3.4 ç»“æœåˆ†æ"></a>3.4 ç»“æœåˆ†æ</h3><ul>
<li><p><strong>GPU åŠ é€Ÿæ•ˆæœæ˜¾è‘—</strong>ï¼šéšç€çŸ©é˜µè§„æ¨¡å¢å¤§ï¼ŒGPU åŠ é€Ÿæ¯”ä»çº¦ 15Ã— æå‡è‡³ 100Ã— ä»¥ä¸Šï¼Œè¡¨ç°å‡ºè‰¯å¥½çš„å¯æ‰©å±•æ€§ã€‚</p>
</li>
<li><p><strong>å°è§„æ¨¡ä»»åŠ¡å¼€é”€å ä¸»å¯¼</strong>ï¼šåœ¨ 256Ã—256 è§„æ¨¡ä¸‹ï¼ŒGPU å¯åŠ¨å¼€é”€å’Œå†…å­˜ä¼ è¾“å»¶è¿Ÿæ¯”ä¾‹è¾ƒé«˜ï¼Œå¯¼è‡´åŠ é€Ÿæ¯”åä½ã€‚</p>
</li>
<li><p><strong>å…±äº«å†…å­˜ä¼˜åŒ–æœ‰æ•ˆ</strong>ï¼šé‡‡ç”¨ Tile æŠ€æœ¯åï¼Œå†…æ ¸è®¡ç®—ä¸å†…å­˜è®¿é—®é‡å æ˜¾è‘—å‡å°‘è®¿å­˜å»¶è¿Ÿã€‚</p>
</li>
</ul>
<hr>
<h2 id="å››ã€çŸ©é˜µè½¬ç½®å®éªŒ"><a href="#å››ã€çŸ©é˜µè½¬ç½®å®éªŒ" class="headerlink" title="å››ã€çŸ©é˜µè½¬ç½®å®éªŒ"></a>å››ã€çŸ©é˜µè½¬ç½®å®éªŒ</h2><h3 id="4-1-å®éªŒèƒŒæ™¯"><a href="#4-1-å®éªŒèƒŒæ™¯" class="headerlink" title="4.1 å®éªŒèƒŒæ™¯"></a>4.1 å®éªŒèƒŒæ™¯</h3><p>çŸ©é˜µè½¬ç½®ï¼ˆMatrix Transposeï¼‰æ˜¯é«˜æ€§èƒ½è®¡ç®—ä¸çŸ©é˜µè¿ç®—ä¸­å¸¸è§çš„åŸºç¡€æ“ä½œï¼Œå…¶ä»»åŠ¡æ˜¯å°†çŸ©é˜µ $A$ ä¸­çš„å…ƒç´  $A_{ij}$ æ˜ å°„åˆ°è½¬ç½®çŸ©é˜µ $A^T_{ji}$ï¼Œè®¡ç®—å¤æ‚åº¦ä¸º $O(M \times N)$ã€‚<br> è¯¥æ“ä½œè™½ç„¶è®¡ç®—é‡è¾ƒå°ï¼Œä½†åœ¨å¤§è§„æ¨¡çŸ©é˜µä¸­ï¼Œ<strong>è®¿å­˜è®¿é—®æ¨¡å¼ä¸è¿ç»­</strong>ï¼Œå¯¼è‡´<strong>ç¼“å­˜å‘½ä¸­ç‡ä½</strong>ä¸<strong>å…¨å±€å†…å­˜å¸¦å®½åˆ©ç”¨ç‡ä¸è¶³</strong>ï¼Œæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚</p>
<p>åœ¨ GPU ä¸Šå®ç°çŸ©é˜µè½¬ç½®çš„ä¼˜åŒ–å…³é”®åœ¨äº<strong>è®¿å­˜æ¨¡å¼ä¸å…±äº«å†…å­˜çš„ä½¿ç”¨</strong>ã€‚<br> é€šè¿‡åœ¨ CUDA å†…æ ¸ä¸­åˆ©ç”¨å…±äº«å†…å­˜ï¼ˆShared Memoryï¼‰ä½œä¸ºæ•°æ®ç¼“å†²åŒºï¼Œå¯ä»¥å®ç°<strong>å…¨å±€å†…å­˜è¯»å†™è®¿é—®åˆå¹¶ï¼ˆMemory Coalescingï¼‰</strong>ï¼Œæ˜¾è‘—æå‡ååç‡ã€‚</p>
<hr>
<h3 id="4-2-ç®—æ³•è®¾è®¡ä¸å®ç°"><a href="#4-2-ç®—æ³•è®¾è®¡ä¸å®ç°" class="headerlink" title="4.2 ç®—æ³•è®¾è®¡ä¸å®ç°"></a>4.2 ç®—æ³•è®¾è®¡ä¸å®ç°</h3><h4 id="ï¼ˆ1ï¼‰ä¸²è¡Œç®—æ³•"><a href="#ï¼ˆ1ï¼‰ä¸²è¡Œç®—æ³•" class="headerlink" title="ï¼ˆ1ï¼‰ä¸²è¡Œç®—æ³•"></a>ï¼ˆ1ï¼‰ä¸²è¡Œç®—æ³•</h4><p>çŸ©é˜µè½¬ç½®çš„åŸºæœ¬å½¢å¼å¦‚ä¸‹ï¼š<br>$$<br>A^T[j][i] &#x3D; A[i][j], \quad 0 \le i &lt; M, 0 \le j &lt; N<br>$$<br>å¯¹åº” C è¯­è¨€å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">void MatrixTransposeCPU(const float *A, float *AT, int rows, int cols)</span><br><span class="line">&#123;</span><br><span class="line">    for (int i = 0; i &lt; rows; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        for (int j = 0; j &lt; cols; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            AT[j * rows + i] = A[i * cols + j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>å¤–å±‚å¾ªç¯éå†è¡Œï¼Œå†…å±‚å¾ªç¯éå†åˆ—ï¼›</li>
<li>å†™å…¥æ“ä½œè·¨è¡Œå­˜å‚¨ï¼Œä¸å…·å¤‡ç©ºé—´å±€éƒ¨æ€§ï¼›</li>
<li>å¯¹äºå¤§è§„æ¨¡çŸ©é˜µï¼Œç¼“å­˜æ•ˆç‡è¾ƒä½ã€‚</li>
</ul>
<hr>
<h4 id="ï¼ˆ2ï¼‰CUDA-å¹¶è¡Œç®—æ³•ï¼ˆNaive-ç‰ˆæœ¬ï¼‰"><a href="#ï¼ˆ2ï¼‰CUDA-å¹¶è¡Œç®—æ³•ï¼ˆNaive-ç‰ˆæœ¬ï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰CUDA å¹¶è¡Œç®—æ³•ï¼ˆNaive ç‰ˆæœ¬ï¼‰"></a>ï¼ˆ2ï¼‰CUDA å¹¶è¡Œç®—æ³•ï¼ˆNaive ç‰ˆæœ¬ï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#define TILE_WIDTH 32</span><br><span class="line">__global__ void MatrixTransposeNaive(const float *A, float *AT, int rows, int cols)</span><br><span class="line">&#123;</span><br><span class="line">    int row = blockIdx.y * blockDim.y + threadIdx.y;</span><br><span class="line">    int col = blockIdx.x * blockDim.x + threadIdx.x;</span><br><span class="line">    if (row &lt; rows &amp;&amp; col &lt; cols)</span><br><span class="line">    &#123;</span><br><span class="line">        AT[col * rows + row] = A[row * cols + col];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¯ä¸ªçº¿ç¨‹è´Ÿè´£æ‹·è´çŸ©é˜µä¸­ä¸€ä¸ªå…ƒç´ ï¼›</li>
<li>è™½ç„¶ç®€å•ç›´è§‚ï¼Œä½†å†™å…¥ <code>AT</code> æ—¶çš„è®¿å­˜æ¨¡å¼ä¸è¿ç»­ï¼›</li>
<li>å…¨å±€å†…å­˜è®¿é—®æœªå¯¹é½ï¼Œæ•ˆç‡ä½ä¸‹ã€‚</li>
</ul>
<hr>
<h4 id="ï¼ˆ3ï¼‰CUDA-å¹¶è¡Œç®—æ³•ï¼ˆShared-Memory-ä¼˜åŒ–ç‰ˆï¼‰"><a href="#ï¼ˆ3ï¼‰CUDA-å¹¶è¡Œç®—æ³•ï¼ˆShared-Memory-ä¼˜åŒ–ç‰ˆï¼‰" class="headerlink" title="ï¼ˆ3ï¼‰CUDA å¹¶è¡Œç®—æ³•ï¼ˆShared Memory ä¼˜åŒ–ç‰ˆï¼‰"></a>ï¼ˆ3ï¼‰CUDA å¹¶è¡Œç®—æ³•ï¼ˆShared Memory ä¼˜åŒ–ç‰ˆï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#define TILE_WIDTH 32</span><br><span class="line">__global__ void MatrixTransposeShared(const float *A, float *AT, int rows, int cols)</span><br><span class="line">&#123;</span><br><span class="line">    __shared__ float tile[TILE_WIDTH][TILE_WIDTH + 1]; // +1é¿å…bank conflict</span><br><span class="line"></span><br><span class="line">    int x = blockIdx.x * TILE_WIDTH + threadIdx.x;</span><br><span class="line">    int y = blockIdx.y * TILE_WIDTH + threadIdx.y;</span><br><span class="line"></span><br><span class="line">    if (x &lt; cols &amp;&amp; y &lt; rows)</span><br><span class="line">    &#123;</span><br><span class="line">        tile[threadIdx.y][threadIdx.x] = A[y * cols + x];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    __syncthreads();</span><br><span class="line"></span><br><span class="line">    int transposedX = blockIdx.y * TILE_WIDTH + threadIdx.x;</span><br><span class="line">    int transposedY = blockIdx.x * TILE_WIDTH + threadIdx.y;</span><br><span class="line"></span><br><span class="line">    if (transposedX &lt; rows &amp;&amp; transposedY &lt; cols)</span><br><span class="line">    &#123;</span><br><span class="line">        AT[transposedY * rows + transposedX] = tile[threadIdx.x][threadIdx.y];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä¼˜åŒ–è¦ç‚¹ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨å…±äº«å†…å­˜ tile ç¼“å­˜ä¸€ä¸ª <code>TILE_WIDTHÃ—TILE_WIDTH</code> çš„å­çŸ©é˜µï¼›</li>
<li>å®ç°çº¿ç¨‹å—å†…éƒ¨çš„è®¿å­˜é‡æ’ï¼Œä½¿å…¨å±€è¯»å†™å‡ä¸ºè¿ç»­è®¿é—®ï¼›</li>
<li>é€šè¿‡ <code>+1</code> å¡«å……é¿å… bank conflictï¼›</li>
<li>å†™å›é˜¶æ®µåŒæ ·ä¿æŒè®¿å­˜åˆå¹¶ï¼Œæ˜¾è‘—æå‡å¸¦å®½åˆ©ç”¨ç‡ã€‚</li>
</ul>
<hr>
<h3 id="4-3-å®éªŒç»“æœä¸åˆ†æ"><a href="#4-3-å®éªŒç»“æœä¸åˆ†æ" class="headerlink" title="4.3 å®éªŒç»“æœä¸åˆ†æ"></a>4.3 å®éªŒç»“æœä¸åˆ†æ</h3><h4 id="ï¼ˆ1ï¼‰è§„æ¨¡â€“åŠ é€Ÿæ¯”è¶‹åŠ¿"><a href="#ï¼ˆ1ï¼‰è§„æ¨¡â€“åŠ é€Ÿæ¯”è¶‹åŠ¿" class="headerlink" title="ï¼ˆ1ï¼‰è§„æ¨¡â€“åŠ é€Ÿæ¯”è¶‹åŠ¿"></a>ï¼ˆ1ï¼‰è§„æ¨¡â€“åŠ é€Ÿæ¯”è¶‹åŠ¿</h4><blockquote>
<p><img src="/2025/11/04/parellel-report2/Users\25490\Downloads\transpose_speedup_dual_axis.png" alt="transpose_speedup_dual_axis"  data-tag='post-image' onload='this.onload=null;this.style.opacity=1;' loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
</blockquote>
<p>å›¾ä¸­æ˜¾ç¤ºäº† CPUã€GPU Naiveã€GPU Shared ä¸‰ç§å®ç°çš„è¿è¡Œæ—¶é—´éšçŸ©é˜µè§„æ¨¡çš„å˜åŒ–æƒ…å†µã€‚<br> å³è½´ä¸º GPU Shared ç›¸å¯¹ CPU çš„åŠ é€Ÿæ¯”ã€‚</p>
<hr>
<h4 id="ï¼ˆ2ï¼‰å®éªŒç»“æœè¡¨æ ¼"><a href="#ï¼ˆ2ï¼‰å®éªŒç»“æœè¡¨æ ¼" class="headerlink" title="ï¼ˆ2ï¼‰å®éªŒç»“æœè¡¨æ ¼"></a>ï¼ˆ2ï¼‰å®éªŒç»“æœè¡¨æ ¼</h4><table>
<thead>
<tr>
<th>Cols</th>
<th>Rows</th>
<th>CPU(ms)</th>
<th>GPU_naive(ms)</th>
<th>GPU_shared(ms)</th>
<th>Speedup_naive</th>
<th>Speedup_shared</th>
</tr>
</thead>
<tbody><tr>
<td>1024</td>
<td>1024</td>
<td>4.491</td>
<td>0.039</td>
<td>0.018</td>
<td>115.13Ã—</td>
<td>249.50Ã—</td>
</tr>
<tr>
<td>4096</td>
<td>4096</td>
<td>128.989</td>
<td>0.534</td>
<td>0.229</td>
<td>241.58Ã—</td>
<td>563.49Ã—</td>
</tr>
<tr>
<td>8192</td>
<td>8192</td>
<td>629.491</td>
<td>2.113</td>
<td>0.920</td>
<td>297.80Ã—</td>
<td>683.14Ã—</td>
</tr>
<tr>
<td>16384</td>
<td>16384</td>
<td>3029.207</td>
<td>8.437</td>
<td>3.712</td>
<td>359.17Ã—</td>
<td>816.36Ã—</td>
</tr>
</tbody></table>
<hr>
<h3 id="4-4-ç»“æœåˆ†æ"><a href="#4-4-ç»“æœåˆ†æ" class="headerlink" title="4.4 ç»“æœåˆ†æ"></a>4.4 ç»“æœåˆ†æ</h3><ul>
<li><strong>æ˜¾è‘—çš„ GPU åŠ é€Ÿæ•ˆæœ</strong>ï¼šéšç€çŸ©é˜µè§„æ¨¡æ‰©å¤§ï¼ŒGPU åŠ é€Ÿæ¯”å‘ˆæŒç»­ä¸Šå‡è¶‹åŠ¿ï¼ŒShared ç‰ˆæœ¬æœ€é«˜è¾¾åˆ° <strong>800Ã— ä»¥ä¸Š</strong>ã€‚</li>
<li><strong>è®¿å­˜ä¼˜åŒ–è´¡çŒ®çªå‡º</strong>ï¼šShared Memory ä¼˜åŒ–ç‰ˆåœ¨æ‰€æœ‰è§„æ¨¡ä¸Šå‡ä¼˜äº Naive å®ç°ï¼Œè¡¨æ˜è®¿å­˜åˆå¹¶ä¸ Bank Conflict é¿å…å¸¦æ¥çš„æ€§èƒ½æ”¶ç›Šæ˜¾è‘—ã€‚</li>
<li><strong>å¯æ‰©å±•æ€§è‰¯å¥½</strong>ï¼šNaive ä¸ Shared å®ç°å‡éšè§„æ¨¡çº¿æ€§å¢é•¿ï¼Œè€Œ GPU æ—¶é—´å¢é•¿é€Ÿç‡æ˜æ˜¾ä½äº CPUï¼Œä½“ç°å‡º GPU åœ¨å¤§è§„æ¨¡å¹¶è¡Œè®¿å­˜ä»»åŠ¡ä¸­çš„é«˜ååç‰¹æ€§ã€‚</li>
</ul>
<hr>
<h3 id="4-5-å°ç»“"><a href="#4-5-å°ç»“" class="headerlink" title="4.5 å°ç»“"></a>4.5 å°ç»“</h3><p>æœ¬å®éªŒéªŒè¯äº†ï¼š</p>
<ol>
<li><strong>CUDA å¹¶è¡ŒåŒ–å¯¹è®¿å­˜å¯†é›†ä»»åŠ¡çš„æ˜¾è‘—æé€Ÿä½œç”¨</strong>ï¼›</li>
<li><strong>å…±äº«å†…å­˜ä¼˜åŒ–åœ¨çŸ©é˜µè½¬ç½®ç±»ä»»åŠ¡ä¸­èƒ½æœ‰æ•ˆå‡å°‘éå¯¹é½è®¿å­˜ä¸ Bank Conflict</strong>ï¼›</li>
<li>éšçŸ©é˜µè§„æ¨¡å¢åŠ ï¼Œ<strong>åŠ é€Ÿæ¯”å‘ˆè¿‘çº¿æ€§æå‡è¶‹åŠ¿</strong>ï¼Œä½“ç°å‡ºè‰¯å¥½çš„å¯æ‰©å±•æ€§ä¸å¸¦å®½åˆ©ç”¨æ•ˆç‡ã€‚</li>
</ol>
<h2 id="äº”ã€äºŒç»´å·ç§¯è¿ç®—å®éªŒ"><a href="#äº”ã€äºŒç»´å·ç§¯è¿ç®—å®éªŒ" class="headerlink" title="äº”ã€äºŒç»´å·ç§¯è¿ç®—å®éªŒ"></a>äº”ã€äºŒç»´å·ç§¯è¿ç®—å®éªŒ</h2><h3 id="5-1-å®éªŒèƒŒæ™¯"><a href="#5-1-å®éªŒèƒŒæ™¯" class="headerlink" title="5.1 å®éªŒèƒŒæ™¯"></a>5.1 å®éªŒèƒŒæ™¯</h3><p>å›¾åƒå·ç§¯ï¼ˆ2D Convolutionï¼‰æ˜¯è®¡ç®—æœºè§†è§‰ã€å›¾åƒå¤„ç†ä»¥åŠæ·±åº¦å­¦ä¹ ä¸­çš„æ ¸å¿ƒæ“ä½œï¼Œç”¨äºè¾¹ç¼˜æ£€æµ‹ã€æ¨¡ç³Šã€é”åŒ–åŠç‰¹å¾æå–ç­‰ä»»åŠ¡ã€‚<br> å…¶åŸºæœ¬å½¢å¼ä¸ºï¼š<br>$$<br>O(i,j) &#x3D; \sum_{m&#x3D;-r}^{r}\sum_{n&#x3D;-r}^{r} I(i+m, j+n) \cdot K(m+r, n+r)<br>$$<br>å…¶ä¸­ï¼š</p>
<ul>
<li>$I$ ä¸ºè¾“å…¥å›¾åƒï¼›</li>
<li>$K$ ä¸ºå·ç§¯æ ¸ï¼›</li>
<li>$r &#x3D; \frac{K-1}{2}$ ä¸ºå·ç§¯æ ¸åŠå¾„ï¼›</li>
<li>$O(i,j)$ ä¸ºè¾“å‡ºåƒç´ ã€‚</li>
</ul>
<p>å·ç§¯è®¡ç®—çš„æ•°æ®è®¿é—®å‘ˆç°<strong>å±€éƒ¨é‡å </strong>ç‰¹æ€§ï¼Œå­˜åœ¨å¤§é‡æ•°æ®å¤ç”¨ï¼Œå› æ­¤åœ¨ GPU ä¸Šå¯åˆ©ç”¨ <strong>å…±äº«å†…å­˜ (Shared Memory)</strong> æé«˜è®¿å­˜æ•ˆç‡ã€‚</p>
<hr>
<h3 id="5-2-ç®—æ³•è®¾è®¡ä¸å®ç°"><a href="#5-2-ç®—æ³•è®¾è®¡ä¸å®ç°" class="headerlink" title="5.2 ç®—æ³•è®¾è®¡ä¸å®ç°"></a>5.2 ç®—æ³•è®¾è®¡ä¸å®ç°</h3><h4 id="ä¸²è¡Œç®—æ³•ï¼ˆCPU-ç‰ˆæœ¬ï¼‰"><a href="#ä¸²è¡Œç®—æ³•ï¼ˆCPU-ç‰ˆæœ¬ï¼‰" class="headerlink" title="ä¸²è¡Œç®—æ³•ï¼ˆCPU ç‰ˆæœ¬ï¼‰"></a>ä¸²è¡Œç®—æ³•ï¼ˆCPU ç‰ˆæœ¬ï¼‰</h4><p>CPU ç‰ˆæœ¬ä½¿ç”¨ä¸‰é‡å¾ªç¯å®ç°äºŒç»´å·ç§¯ï¼ŒæŒ‰è¡Œåˆ—æ‰«æè¾“å…¥å›¾åƒï¼Œé€ç‚¹è®¡ç®—å·ç§¯å’Œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">void Conv2DCPU(const int *image, const int *kernel, int *output, int rows, int cols, int K)</span><br><span class="line">&#123;</span><br><span class="line">    int halfK = K / 2;</span><br><span class="line">    for (int i = 0; i &lt; rows; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        for (int j = 0; j &lt; cols; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            int sum = 0;</span><br><span class="line">            for (int ki = -halfK; ki &lt;= halfK; ++ki)</span><br><span class="line">            &#123;</span><br><span class="line">                for (int kj = -halfK; kj &lt;= halfK; ++kj)</span><br><span class="line">                &#123;</span><br><span class="line">                    int r = i + ki;</span><br><span class="line">                    int c = j + kj;</span><br><span class="line">                    if (r &gt;= 0 &amp;&amp; r &lt; rows &amp;&amp; c &gt;= 0 &amp;&amp; c &lt; cols)</span><br><span class="line">                        sum += image[r * cols + c] * kernel[(ki + halfK) * K + (kj + halfK)];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            output[i * cols + j] = sum;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>å¤–å±‚ä¸¤é‡å¾ªç¯æ‰«ææ•´ä¸ªå›¾åƒï¼›</li>
<li>å†…å±‚ä¸¤é‡å¾ªç¯éå†å·ç§¯æ ¸ï¼›</li>
<li>è¾¹ç•Œéƒ¨åˆ†é‡‡ç”¨é›¶å¡«å……ï¼ˆzero paddingï¼‰ã€‚</li>
</ul>
<hr>
<h4 id="å¹¶è¡Œç®—æ³•ï¼ˆCUDA-å…±äº«å†…å­˜ä¼˜åŒ–ï¼‰"><a href="#å¹¶è¡Œç®—æ³•ï¼ˆCUDA-å…±äº«å†…å­˜ä¼˜åŒ–ï¼‰" class="headerlink" title="å¹¶è¡Œç®—æ³•ï¼ˆCUDA å…±äº«å†…å­˜ä¼˜åŒ–ï¼‰"></a>å¹¶è¡Œç®—æ³•ï¼ˆCUDA å…±äº«å†…å­˜ä¼˜åŒ–ï¼‰</h4><p>GPU ç‰ˆæœ¬é‡‡ç”¨ Tile + Shared Memory ä¼˜åŒ–ï¼Œæ¯ä¸ªçº¿ç¨‹å—å¤„ç†ä¸€ä¸ª tileï¼Œå—å†…çº¿ç¨‹ååŒåŠ è½½è¾“å…¥å­å—ä¸å…¶ halo åŒºï¼ˆå·ç§¯æ ¸è¾¹ç•Œæ‰©å±•åŒºï¼‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#define TILE_WIDTH 16  // æ¯ä¸ª block è¾“å‡º tile å¤§å°ï¼Œå¯æ ¹æ® GPU è°ƒæ•´</span><br><span class="line"></span><br><span class="line">__global__ void Conv2DShared(const int *image, const int *kernel, int *output,</span><br><span class="line">                             int rows, int cols, int K)</span><br><span class="line">&#123;</span><br><span class="line">    extern __shared__ int tile[];  // åŠ¨æ€å…±äº«å†…å­˜ï¼Œå¤§å° = (TILE_WIDTH + 2*radius)^2</span><br><span class="line">    int radius = K / 2;</span><br><span class="line"></span><br><span class="line">    // çº¿ç¨‹ç´¢å¼•</span><br><span class="line">    int tx = threadIdx.x;</span><br><span class="line">    int ty = threadIdx.y;</span><br><span class="line">    int tid = ty * blockDim.x + tx;               // çº¿æ€§çº¿ç¨‹ id</span><br><span class="line">    int threads_per_block = blockDim.x * blockDim.y;</span><br><span class="line"></span><br><span class="line">    // è¯¥ block è´Ÿè´£çš„è¾“å‡º tile å·¦ä¸Šè§’åœ¨å…¨å±€å›¾åƒä¸­çš„åæ ‡</span><br><span class="line">    int out_row0 = blockIdx.y * TILE_WIDTH;</span><br><span class="line">    int out_col0 = blockIdx.x * TILE_WIDTH;</span><br><span class="line"></span><br><span class="line">    // å…±äº«å†…å­˜ tile çš„å°ºå¯¸ï¼ˆåŒ…å« haloï¼‰</span><br><span class="line">    int sh_w = TILE_WIDTH + 2 * radius;</span><br><span class="line">    int sh_h = TILE_WIDTH + 2 * radius;</span><br><span class="line">    int total = sh_w * sh_h;                      // å…±äº«å†…å­˜ä¸­éœ€è¦å¡«å……çš„å…ƒç´ æ€»æ•°</span><br><span class="line"></span><br><span class="line">    // =============== é˜¶æ®µ1ï¼šååŒæŠŠ (tile+halo) ä»å…¨å±€è¯»å…¥å…±äº«å†…å­˜ ===============</span><br><span class="line">    // å¾ªç¯+æ­¥é•¿è£…è½½ï¼šä¿è¯ total å¯èƒ½å¤§äºçº¿ç¨‹æ•°æ—¶ä¹Ÿèƒ½å®Œå…¨è¦†ç›–</span><br><span class="line">    for (int idx = tid; idx &lt; total; idx += threads_per_block)</span><br><span class="line">    &#123;</span><br><span class="line">        int sr = idx / sh_w;                      // shared å†…çš„è¡Œ</span><br><span class="line">        int sc = idx % sh_w;                      // shared å†…çš„åˆ—</span><br><span class="line"></span><br><span class="line">        // æ˜ å°„åˆ°å…¨å±€è¾“å…¥å›¾åƒåæ ‡ï¼ˆæ³¨æ„ halo åç§»ï¼‰</span><br><span class="line">        int gr = out_row0 + sr - radius;</span><br><span class="line">        int gc = out_col0 + sc - radius;</span><br><span class="line"></span><br><span class="line">        // è¾¹ç•Œå¤„ç†ï¼šè¶Šç•Œè¡¥ 0</span><br><span class="line">        if (gr &gt;= 0 &amp;&amp; gr &lt; rows &amp;&amp; gc &gt;= 0 &amp;&amp; gc &lt; cols)</span><br><span class="line">            tile[idx] = image[gr * cols + gc];</span><br><span class="line">        else</span><br><span class="line">            tile[idx] = 0;</span><br><span class="line">    &#125;</span><br><span class="line">    __syncthreads();</span><br><span class="line"></span><br><span class="line">    // =============== é˜¶æ®µ2ï¼šåœ¨å…±äº«å†…å­˜ä¸Šå®Œæˆ KxK å·ç§¯å¹¶å†™å› ===============</span><br><span class="line">    // æ¯ä¸ªçº¿ç¨‹è®¡ç®—ä¸€ä¸ªè¾“å‡ºåƒç´ ï¼ˆä¸­å¿ƒ TILE_WIDTHÃ—TILE_WIDTH åŒºåŸŸï¼‰</span><br><span class="line">    int out_r = out_row0 + ty;                    // è¯¥çº¿ç¨‹å¯¹åº”è¾“å‡ºåƒç´ çš„å…¨å±€è¡Œ</span><br><span class="line">    int out_c = out_col0 + tx;                    // è¯¥çº¿ç¨‹å¯¹åº”è¾“å‡ºåƒç´ çš„å…¨å±€åˆ—</span><br><span class="line"></span><br><span class="line">    if (out_r &lt; rows &amp;&amp; out_c &lt; cols)</span><br><span class="line">    &#123;</span><br><span class="line">        // å…±äº«å†…å­˜ä¸­è¯¥è¾“å‡ºåƒç´ çš„â€œä¸­å¿ƒâ€ä½ç½®ï¼ˆåŠ ä¸Š halo åç§»ï¼‰</span><br><span class="line">        int sr_center = ty + radius;</span><br><span class="line">        int sc_center = tx + radius;</span><br><span class="line"></span><br><span class="line">        int sum = 0;</span><br><span class="line">        // åœ¨å…±äº«å†…å­˜ä¸­åš KxK ç‚¹ç§¯</span><br><span class="line">        for (int i = 0; i &lt; K; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            int sr = sr_center + (i - radius);</span><br><span class="line">            int sh_row_off = sr * sh_w;</span><br><span class="line">            for (int j = 0; j &lt; K; ++j)</span><br><span class="line">            &#123;</span><br><span class="line">                int sc = sc_center + (j - radius);</span><br><span class="line">                sum += tile[sh_row_off + sc] * kernel[i * K + j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        output[out_r * cols + out_c] = sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä¼˜åŒ–å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>æ¯ä¸ªçº¿ç¨‹å—åŠ è½½ tile + halo åŒºæ•°æ®ï¼›</li>
<li>æ‰€æœ‰çº¿ç¨‹åä½œå®Œæˆå…±äº«å†…å­˜åŠ è½½ï¼›</li>
<li>åŒæ­¥åå±€éƒ¨è®¡ç®—å®Œå…¨åœ¨å…±äº«å†…å­˜ä¸­è¿›è¡Œï¼›</li>
<li>æå¤§å‡å°‘å…¨å±€å†…å­˜è®¿é—®æ¬¡æ•°ã€‚</li>
</ul>
<hr>
<h3 id="5-3-å®éªŒç»“æœä¸æ€§èƒ½åˆ†æ"><a href="#5-3-å®éªŒç»“æœä¸æ€§èƒ½åˆ†æ" class="headerlink" title="5.3 å®éªŒç»“æœä¸æ€§èƒ½åˆ†æ"></a>5.3 å®éªŒç»“æœä¸æ€§èƒ½åˆ†æ</h3><h4 id="ï¼ˆ1ï¼‰æ—¶é—´â€“åŠ é€Ÿæ¯”åŒè½´å›¾"><a href="#ï¼ˆ1ï¼‰æ—¶é—´â€“åŠ é€Ÿæ¯”åŒè½´å›¾" class="headerlink" title="ï¼ˆ1ï¼‰æ—¶é—´â€“åŠ é€Ÿæ¯”åŒè½´å›¾"></a>ï¼ˆ1ï¼‰æ—¶é—´â€“åŠ é€Ÿæ¯”åŒè½´å›¾</h4><p><img src="/2025/11/04/parellel-report2/Users\25490\Downloads\conv2d_speedup_grouped.png" alt="conv2d_speedup_grouped.png"  data-tag='post-image' onload='this.onload=null;this.style.opacity=1;' loading="lazy" onerror='this.onerror=null;this.src="/img/404.jpg"'></p>
<hr>
<h4 id="ï¼ˆ2ï¼‰å®éªŒç»“æœè¡¨æ ¼-1"><a href="#ï¼ˆ2ï¼‰å®éªŒç»“æœè¡¨æ ¼-1" class="headerlink" title="ï¼ˆ2ï¼‰å®éªŒç»“æœè¡¨æ ¼"></a>ï¼ˆ2ï¼‰å®éªŒç»“æœè¡¨æ ¼</h4><table>
<thead>
<tr>
<th>Cols</th>
<th>Rows</th>
<th>K</th>
<th>CPU(ms)</th>
<th>GPU(ms)</th>
<th>Speedup</th>
</tr>
</thead>
<tbody><tr>
<td>256</td>
<td>256</td>
<td>3</td>
<td>3.027</td>
<td>0.006</td>
<td>504.5Ã—</td>
</tr>
<tr>
<td>512</td>
<td>512</td>
<td>3</td>
<td>12.093</td>
<td>0.009</td>
<td>1343.7Ã—</td>
</tr>
<tr>
<td>1024</td>
<td>1024</td>
<td>3</td>
<td>48.991</td>
<td>0.024</td>
<td>2041.3Ã—</td>
</tr>
<tr>
<td>2048</td>
<td>2048</td>
<td>3</td>
<td>193.340</td>
<td>0.073</td>
<td>2648.5Ã—</td>
</tr>
<tr>
<td>256</td>
<td>256</td>
<td>5</td>
<td>7.788</td>
<td>0.008</td>
<td>973.5Ã—</td>
</tr>
<tr>
<td>512</td>
<td>512</td>
<td>5</td>
<td>31.150</td>
<td>0.013</td>
<td>2396.1Ã—</td>
</tr>
<tr>
<td>1024</td>
<td>1024</td>
<td>5</td>
<td>125.550</td>
<td>0.035</td>
<td>3587.1Ã—</td>
</tr>
<tr>
<td>2048</td>
<td>2048</td>
<td>5</td>
<td>504.837</td>
<td>0.119</td>
<td>4243.3Ã—</td>
</tr>
</tbody></table>
<hr>
<h3 id="5-4-ç»“æœåˆ†æ"><a href="#5-4-ç»“æœåˆ†æ" class="headerlink" title="5.4 ç»“æœåˆ†æ"></a>5.4 ç»“æœåˆ†æ</h3><ul>
<li><strong>å…±äº«å†…å­˜é‡ç”¨é«˜æ•ˆ</strong>ï¼šå·ç§¯åŒºåŸŸå­˜åœ¨å¤§é‡æ•°æ®é‡å ï¼Œä½¿ç”¨å…±äº«å†…å­˜é¿å…äº†é‡å¤ä»å…¨å±€å†…å­˜åŠ è½½åŒä¸€åƒç´ ï¼ŒGPUåŠ é€Ÿæ•ˆæœæ˜æ˜¾ï¼›</li>
<li><strong>å·ç§¯æ ¸å¤§å°å½±å“å¼±</strong>ï¼šéšç€ $K$ ä» 3 åˆ° 5 å¢å¤§ï¼ŒGPU æ—¶é—´å¢é•¿è¾ƒæ…¢ï¼Œè€Œ CPU æ—¶é—´æˆå¹³æ–¹å¢é•¿ï¼›</li>
</ul>
<hr>
<p>âœ… <strong>æ€»ç»“</strong></p>
<p>é€šè¿‡æœ¬å®éªŒéªŒè¯äº†å…±äº«å†…å­˜ä¼˜åŒ–å¯¹äºŒç»´å·ç§¯è¿ç®—çš„æ˜¾è‘—åŠ é€Ÿä½œç”¨ã€‚<br> ç›¸è¾ƒäº CPU çš„é¡ºåºå·ç§¯ï¼ŒGPU åœ¨ 2048Ã—2048 å›¾åƒã€5Ã—5 å·ç§¯æ ¸ä¸‹å¯å®ç°è¶…è¿‡ <strong>4000 å€</strong> çš„æ€§èƒ½æå‡ã€‚</p>
<h2 id="å…­ã€å®éªŒæ€»ç»“"><a href="#å…­ã€å®éªŒæ€»ç»“" class="headerlink" title="å…­ã€å®éªŒæ€»ç»“"></a>å…­ã€å®éªŒæ€»ç»“</h2><ul>
<li><p><strong>æ•°æ®è§„æ¨¡å†³å®šåŠ é€Ÿæ”¶ç›Š</strong><br> åœ¨å°è§„æ¨¡è®¡ç®—ä¸­ï¼ˆå¦‚ 256Ã—256ï¼‰ï¼ŒGPU å¯åŠ¨ä¸æ•°æ®ä¼ è¾“çš„å›ºå®šå¼€é”€å æ¯”é«˜ï¼Œæ•´ä½“åŠ é€Ÿæ¯”æœ‰é™ï¼›<br> éšç€é—®é¢˜è§„æ¨¡å¢å¤§ï¼Œè®¡ç®—å¯†é›†åº¦ä¸Šå‡ï¼ŒGPU å¹¶è¡Œè®¡ç®—èƒ½åŠ›è¢«å……åˆ†åˆ©ç”¨ï¼Œé€Ÿåº¦æå‡æ˜¾è‘—ï¼Œå¯è¾¾ç™¾å€è‡³åƒå€ä»¥ä¸Šã€‚</p>
</li>
<li><p><strong>å…±äº«å†…å­˜ä¼˜åŒ–æ•ˆæœæ˜¾è‘—</strong><br> å¯¹çŸ©é˜µâ€“å‘é‡ä¹˜æ³•ã€çŸ©é˜µè½¬ç½®å’ŒäºŒç»´å·ç§¯ç­‰å†…å­˜å¯†é›†å‹ä»»åŠ¡ï¼Œå…±äº«å†…å­˜ï¼ˆShared Memoryï¼‰èƒ½æœ‰æ•ˆå‡å°‘å…¨å±€è®¿å­˜æ¬¡æ•°ã€‚<br> å®éªŒä¸­ï¼Œå·ç§¯æ“ä½œçš„åŠ é€Ÿæ¯”æœ€é«˜è¾¾ <strong>4000Ã—</strong>ï¼Œè¯´æ˜åœ¨æ•°æ®å±€éƒ¨æ€§å¼ºçš„åœºæ™¯ä¸‹ï¼Œtile + halo ç¼“å­˜ç­–ç•¥æä¸ºé«˜æ•ˆã€‚</p>
</li>
<li><p><strong>æ€§èƒ½ç“¶é¢ˆåˆ†æ</strong></p>
<ol>
<li>å¯¹å°çŸ©é˜µè€Œè¨€ï¼Œ<strong>kernel å¯åŠ¨æ—¶é—´</strong> å’Œ <strong>ä¸»æœºâ€“è®¾å¤‡é—´æ•°æ®æ‹·è´</strong> æˆä¸ºä¸»è¦ç“¶é¢ˆï¼›</li>
<li>å¯¹å¤§çŸ©é˜µå’Œå·ç§¯è€Œè¨€ï¼Œ<strong>å…¨å±€å†…å­˜å¸¦å®½</strong> å’Œ <strong>è®¿å­˜æ¨¡å¼ä¸è¿ç»­æ€§</strong> æ˜¯ä¸»è¦é™åˆ¶ï¼›</li>
<li>åˆç†çš„ <strong>çº¿ç¨‹å—å°ºå¯¸ (TILE_WIDTH)</strong> ä¸ <strong>è®¿å­˜å¯¹é½</strong> èƒ½æ˜¾è‘—ç¼“è§£æ€§èƒ½æŸå¤±ã€‚</li>
</ol>
</li>
<li><p><strong>é€šç”¨ä¼˜åŒ–ç­–ç•¥</strong></p>
<ol>
<li>é‡‡ç”¨ <strong>åˆ†å— (Tiling)</strong> ä¸ <strong>å…±äº«å†…å­˜ç¼“å­˜</strong> æé«˜å±€éƒ¨æ•°æ®é‡ç”¨ç‡ï¼›</li>
<li>å°½é‡ä¿è¯ <strong>Coalesced Memory Access</strong>ï¼ˆè¿ç»­è®¿å­˜ï¼‰ï¼Œå‡å°‘éå¯¹é½è¯»å†™ï¼›</li>
<li>åˆç†é€‰æ‹© Block&#x2F;Grid å°ºå¯¸ï¼Œé¿å…è¿‡å¤šç©ºçº¿ç¨‹ï¼›</li>
<li>ä½¿ç”¨ <strong>å¼‚æ­¥æµ (cudaStream)</strong> ä¸ <strong>äº‹ä»¶è®¡æ—¶ (cudaEvent)</strong> ç²¾ç¡®æµ‹é‡ä¸é‡å è®¡ç®—ã€‚</li>
</ol>
</li>
<li><p><strong>æ€»ä½“ç»“è®º</strong></p>
<blockquote>
<p>æœ¬æ¬¡å®éªŒè¡¨æ˜ï¼ŒCUDA åœ¨å¤§è§„æ¨¡çŸ©é˜µè®¡ç®—ä¸­ç›¸è¾ƒäº CPU å…·æœ‰æ•°é‡çº§çš„æ€§èƒ½ä¼˜åŠ¿ã€‚<br> åˆ©ç”¨å…±äº«å†…å­˜ã€æ•°æ®åˆ†å—ä¸è®¿å­˜ä¼˜åŒ–ç­–ç•¥ï¼Œå¯æœ‰æ•ˆæŒ–æ˜ GPU çš„å¹¶è¡Œæ½œåŠ›ã€‚<br> åŒæ—¶ä¹Ÿè¦æ³¨æ„ï¼Œå¯¹äºå°è§„æ¨¡é—®é¢˜ï¼ŒGPU è°ƒåº¦ä¸ä¼ è¾“å¼€é”€å¯èƒ½æŠµæ¶ˆå¹¶è¡Œå¸¦æ¥çš„æ”¶ç›Šã€‚</p>
</blockquote>
</li>
</ul>

</article>
    
    

</div>
<div class="trm-post-next-prev row">
    <div class="col-lg-12">
        <!-- title -->
        <h5 class="trm-title-with-divider">
            å…¶ä»–æ–‡ç« 
            <span data-number="02"></span>
        </h5>
    </div>
    
        <div class="col-lg-6">
    <div class="trm-blog-card trm-scroll-animation">
        <a href="/2025/11/10/parellel-report3/" class="trm-cover-frame trm-anima-link">
            
            
                <img alt="cover" class="no-fancybox" src="/img/block.jpg">
            
        </a>
        
        <div class="trm-card-descr">
            <div class="trm-label trm-category trm-mb-20">
                <a href=" #.">
                    æœªåˆ†ç±»
                </a>
            </div>
            <h5>
                <a href="/2025/11/10/parellel-report3/" class="trm-anima-link">
                    
                </a>
            </h5>
            <div class="trm-divider trm-mb-20 trm-mt-20"></div>
            <ul class="trm-card-data trm-label">
                <li>25/11/10</li>
                <li>19:14</li>
                
                
            </ul>
        </div>
    </div>
</div>
    
    
        <div class="col-lg-6">
    <div class="trm-blog-card trm-scroll-animation">
        <a href="/2025/10/29/multi-process-ov2/" class="trm-cover-frame trm-anima-link">
            
            
                <img alt="cover" class="no-fancybox" src="https://www.logosc.cn/uploads/resources/2018/11/29/1543459457_thumb.jpg">
            
        </a>
        
        <div class="trm-card-descr">
            <div class="trm-label trm-category trm-mb-20">
                <a href=" /categories/RLHF/">
                    RLHF
                </a>
            </div>
            <h5>
                <a href="/2025/10/29/multi-process-ov2/" class="trm-anima-link">
                    multi-process-ov2
                </a>
            </h5>
            <div class="trm-divider trm-mb-20 trm-mt-20"></div>
            <ul class="trm-card-data trm-label">
                <li>25/10/29</li>
                <li>21:06</li>
                
                
            </ul>
        </div>
    </div>
</div>
    
</div>

    



                    <div class="trm-divider footer-divider"></div>

                    <!-- footer -->
                    <footer class="trm-footer-card trm-scroll-animation">

    

    

    
        <div class="trm-footer-item">
            <span>
                ç”± <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> é©±åŠ¨ v7.3.0
            </span>
            <span class="footer-separator" data-separator=" | "></span>
            <span> 
                ä¸»é¢˜ - 
                <a rel="noopener" href='https://github.com/MaLuns/hexo-theme-async' target='_blank'>Async</a>
                v2.2.6
            </span>
        </div>
      

     

     
</footer>
                    <!-- footer end -->

                </div>
            </div>
        </div>
    </div>
</div>
            <!-- body end -->

            

            
<div class="trm-fixed-container">
    
    
        <div class="trm-fixed-btn" data-title="é˜…è¯»æ¨¡å¼" onclick="asyncFun.switchReadMode()">
            <i class="iconfont fas fa-book-reader"></i>
        </div>
    
    
    <div id="trm-back-top" class="trm-fixed-btn" data-title="å›åˆ°é¡¶éƒ¨">
        <i class="iconfont fas fa-arrow-up"></i>
    </div>
</div>
        </div>
      </div>
      <!-- scroll container end -->
  </div>
  <!-- app wrapper end -->

  
  <!-- Plugin -->




    
    
<script src="https://unpkg.com/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script>

    

    

    

    <!-- æ•°å­¦å…¬å¼ -->
    

    <!-- è¯„è®ºæ’ä»¶ -->
    
        

        
    

		




    <!-- Service Worker -->
    
    <!-- baidu push -->
    


<script id="async-script" src="/js/main.js?v=2.2.6"></script>

<!-- CDN -->


    

    

    



</body>

</html>